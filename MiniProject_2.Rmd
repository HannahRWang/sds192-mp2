---
title: "Mini-Project 2"
output:
  html_document:
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r}
contributions2 <- contributions %>%
  filter(transaction_type == "24E", 
         entity_type == "IND", 
         transaction_pgi == "G2012")%>%
  select(cmte_id, transaction_type, entity_type, transaction_pgi, name, state, transaction_amt, cand_id, file_num)
  
```

```{r}
candidates2 <- candidates %>%
  filter(cand_election_yr == "2012", cand_office == "P")
```

```{r}
graph <- contributions2 %>%
  full_join(candidates2, by = "cand_id")
```

```{r}
newgraph <- graph %>%
  group_by(state, cand_name) %>%
  summarize(avg_donation = mean(transaction_amt))%>%
  na.omit
<<<<<<< HEAD
```

```{r}
finalgraph <- ggplot(newgraph, aes(x=cand_name, y=avg_donation, fill = cand_name))+
  geom_col()+
  facet_wrap(~state, scales='free_x', ncol = 5)+
  xlab("Candidate Name")+
  ylab("Average Donation")+
  theme(legend.position = "none")+
  scale_fill_manual(values = c("blue","red"))+
  theme(axis.text.x = element_text(size=5),
        axis.text.y = element_text(size=5))+
  labs(title = "Average Individual Presidential Candidate Donation By State")
  
finalgraph
```

```{r}
ggplot(newgraph, aes(x=cand_name, y=avg_donation))+
  geom_col()+
  facet_wrap(~state)
```


^[Github Repository: https://github.com/HannahRWang/sds192-mp2]
